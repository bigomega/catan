@import "/catan/css/index/accessibility.css";
@import "/catan/css/index/board.css";
@import "/catan/css/constants.css";

@font-face { font-family: Papyrus; src: url(/catan/css/fonts/Papyrus.ttf); }
@font-face { font-family: EagleLake; src: url(/catan/css/fonts/EagleLake-Regular.ttf); }
@font-face { font-family: Raleway; src: url(/catan/css/fonts/Raleway-Light.ttf); font-weight: 200; }
@font-face { font-family: Raleway; src: url(/catan/css/fonts/Raleway-Regular.ttf); }
@font-face { font-family: Raleway; src: url(/catan/css/fonts/Raleway-Bold.ttf); font-weight: 600; }

html,
body {
  height: 100%;
  margin: 0;
  background: var(--water-color);
  font-family: Raleway, sans-serif;
  letter-spacing: .2px;
}

/* hr { border-top-color: #fff; border-bottom-color: #fff; } */

.button {
  display: block;
  background: none; color: inherit; border: none;
  font: inherit; cursor: pointer;
  outline: inherit; appearance: unset;
  padding: 0; padding-block: 0px; padding-inline: 0px;
}

.button {
  padding: 7px 25px; width: fit-content;
  box-sizing: border-box; font-family: EagleLake;
  border: 2px solid; border-radius: 50px;
  text-align: center;
  background: #333; color: var(--sand-color);
  font-size: 1.2em; font-weight: bold; word-spacing: 5px;
  transition: all .25s ease; display: inline-block;

  &:active { background: #000; }
  &:hover, &:focus { box-shadow: 0 0 10px 0px var(--sand-color), 0 0 20px 0px #333; }

  &.secondary {
    padding: 5px 15px; font-size: 1em;
    color: var(--sand-color-text-dark); background: transparent;
    &:active { background: var(--sand-color-text-dark); color: var(--sand-color); }
  }

  &.text {
    padding: 5px; font-size: 1em;
    background: none; border: none;
    color: #333; text-decoration: underline;
    &:hover, &:focus { color: var(--sand-color-text-dark); box-shadow: none; }
  }
}

/* --------------------------------------
 * GAME & BOARD
 * -------------
*/

#game > .accessibility-zone .info-zone .play-full-game {
  font-family: EagleLake; font-size: 2em;
  text-align: center; margin: 10px 0 30px;
  a {
    color: inherit; text-shadow: 0 0 20px #8fc045, 0 0 10px #8fc045, 0 0 5px #8fc045, 0 0 3px #8fc045, 0 0 1px #8fc045, 0 0 1px #8fc045, 0 0 1px #8fc045, 0 0 1px #8fc045;
    &:hover { color: #fff; }
  }
}

#game>.accessibility-zone .info-zone .container .text-container .subtitle .social-icon {
  background-image: url(/catan/images/social-icons.png);
}

#game :is(.board-container, .accessibility-zone) { transition: all .125s ease-in; }
#game.board--editing :is(.board-container, .accessibility-zone) { margin-top: calc(170px + 10px); }

.board .tile.robbed::before {
  background-image: url(/catan/images/robber.png);
  left: 53px; top: 30px; height: 90px; width: 47px;
}
#game.board--editing .board .tile {
  cursor: pointer;

  .tile-replace {
    font-family: initial;
    position: absolute; top: 0; left: 0; width: 50px; height: 50px;
    border-radius: 50px;
    margin-left: 48px;
    margin-top: 61px;
    z-index: 4;
    opacity: 0;
    background: #333; color: var(--sand-color);
    font-size: 50px; text-align: center; line-height: 45px;
    box-shadow: 0 0 10px 0px var(--sand-color), 0 0 20px 0px #333;
    &::before { content: '↺'; }
  }
  &.S:not([data-trade]) .tile-replace {
    line-height: 45px;
    &::before { content: '+'; }
  }


  .background, .number { transition: all .125s ease-in; }
  &:is(:hover, .picked) .tile-replace { opacity: 1; transition: all .125s ease-in; }
  &.picked .tile-replace { transform: scale(1.5); font-size: 30px; &::before { content: '…' !important; } }
  &:hover, &.picked {
    /* .tile-replace { display: block; } */
    &:not(.S) {
      .tile-replace { margin-left: 45px; margin-top: 57px; }

      .background {
        z-index: 1;
        top: -3px;
        left: -3px;
        animation: none;
        filter: drop-shadow(5px 5px 5px #000) sepia(.8) brightness(0.9);
      }
      .number {
        margin-left: 45px;
        margin-top: 57px;
        animation: none;
        background: #999;
        &::before { color: #666; }
      }

    }
  }
}

/* Images reloaded for the different URL path */
:is(.board, #tile-selector) .tile {
  &.G .background { background-image: url('/catan/images/tiles/Grassland.png'); }
  &.J .background { background-image: url('/catan/images/tiles/Jungle.png'); }
  &.C .background { background-image: url('/catan/images/tiles/Clay Pit.png'); }
  &.M .background { background-image: url('/catan/images/tiles/Mountain.png'); }
  &.F .background { background-image: url('/catan/images/tiles/Fields.png'); }
  &.D .background { background-image: url('/catan/images/tiles/Desert.png'); }
  &.S .background { background-image: url('/catan/images/tiles/Sea.png'); }
  &.S[data-trade="B"]::after { background-image: url(/catan/images/trade/Brick.png); }
  &.S[data-trade="L"]::after { background-image: url(/catan/images/trade/Lumber.png); }
  &.S[data-trade="O"]::after { background-image: url(/catan/images/trade/Ore.png); }
  &.S[data-trade="S"]::after { background-image: url(/catan/images/trade/Sheep.png); }
  &.S[data-trade="W"]::after { background-image: url(/catan/images/trade/Wheat.png); }
  &.S[data-trade="*"]::after { background-image: url(/catan/images/trade/*3.png); }
  .beach-1 { background-image: url(/catan/images/beach-1.png); }
  .beach-2 { background-image: url(/catan/images/beach-2.png); }
  .beach-3 { background-image: url(/catan/images/beach-3.png); }
  .trade-post { background-image: url(/catan/images/trade/Dock.png); }
}

/* --------------------------------------
 * TILE SELECTOR
 * -------------
*/

#tile-selector {
  font-family: EagleLake;
  position: fixed; left: 0px; top: -230px;
  width: calc(100% - 280px); padding: 10px; box-sizing: border-box;
  height: 170px;
  overflow: scroll;
  background: var(--sand-color); color: #333;
  filter: drop-shadow(0px 0px 30px #000);
  transition: all .125s ease-in;
  &.open { top: 0; }

  .title {
    height: 100%;
    display: none; justify-content: center; align-items: center;
    opacity: 0.15; font-size: 3em;
  }
  &[data-mode="start"] .title { display: flex; }

  .select-tiles {
    display: none; justify-content: center;
    overflow: scroll;
    padding-top: 18px; margin-top: -10px;

    .tile-container {
      margin: 0 15px;
      flex-shrink: 0;
      cursor: pointer;

      &:first-child { margin-left: 1px; }
      .tile {
        width: 95px;
        aspect-ratio: 1 / 1.164;
        position: relative;
        transition: top .125s ease-in;

        .background {
          position: absolute; width: 100%; height: 100%; left: 0; top: 0;
          background-size: cover;
        }
        &:not(.S) .background { filter: drop-shadow(0px 0px 1px #0009); }
        .tile-border {
          background-image: url(/catan/images/tiles/Sea.png);
          opacity: 0.5;
        }
      }
      &:hover .tile { filter: drop-shadow(0px 5px 5px #0009); top: -5px; }
      .tile-text { text-align: center; margin-top: 5px; opacity: 0.5; }
    }

    .cancel-container { margin: 0 0 30px 25px; display: flex; flex-direction: column; justify-content: center; }
  }
  &[data-mode="tiles"] .select-tiles { display: flex; }

  .select-trade {
    display: none; justify-content: center;
    margin-top: 20px;

    .trade-container {
      cursor: pointer;
      margin: 0 15px;
      display: flex; flex-direction: column; align-items: center;
      &:first-child { margin-left: 1px; }

      .trade-type {
        aspect-ratio: 5 / 6;
        height: 80px;
        position: relative;

        &::before {
          content: '';
          position: absolute; left: 0; top: 0;
          width: 100%; height: 100%;
          background-size: contain; background-repeat: no-repeat;
        }


        &.B2::before { background-image: url(/catan/images/trade/Brick.png); }
        &.L2::before { background-image: url(/catan/images/trade/Lumber.png); }
        &.O2::before { background-image: url(/catan/images/trade/Ore.png); }
        &.S2::before { background-image: url(/catan/images/trade/Sheep.png); }
        &.W2::before { background-image: url(/catan/images/trade/Wheat.png); }
        &._3::before { background-image: url(/catan/images/trade/*3.png); }
      }
      &:hover .trade-type::before { filter: drop-shadow(0px 5px 5px #000a); top: -5px; }
      .trade-text { text-align: center; margin-top: 10px; opacity: 0.5; }
    }

    .cancel-container, .no-trade-container { margin-left: 15px; display: flex; flex-direction: column; justify-content: center; }
    .no-trade-container { margin-left: 25px; }
    .cancel-container { margin-left: 35px; }
  }
  &[data-mode="trade"] .select-trade { display: flex; }
}

/* --------------------------------------
 * SHUFFLER
 * -------------
*/

#shuffler {
  position: fixed; right: 0; top: 0;
  width: 280px; height: 100%; padding: 10px 30px 30px; box-sizing: border-box;
  overflow: scroll;
  background: var(--sand-color); color: #333;
  z-index: 1;
  filter: drop-shadow(0px 0px 30px #000);

  .title { font-size: 1.2em; margin-bottom: 10px; opacity: 0.5; }
  label {
    display: block; cursor: pointer; margin: 10px 0;
    &:has(input:not(:checked)) { opacity: 0.5; }
    &:hover { opacity: 1 !important; color: var(--sand-color-text-dark); }
  }
  .button {
    &.shuffle { margin: 20px 0 15px ; display: block; font-family: EagleLake; }
    &.reset { margin-bottom: 10px; }
    /* &.reset { margin-left: 10px; margin-bottom: 20px; } */
    &.copy {
      margin-bottom: 10px;
      &::before { content: 'Copy URL'; }
      &.copied {
        transition: none; font-family: Raleway;
        opacity: 0.5; color: #333;
        &::before { content: 'Link Copied…'; }
      }
    }
    &.render { margin: 20px 10px 0 0; }
  }
  .edit-section {
    padding: 10px 0;
    input { display: none; }
    > .button { display: none; }
    input:not(:checked) ~ .open-edit-text { display: block; }
    input:checked ~ .close-edit-text { display: block; }
    /* override */
    &:has(input:not(:checked)) { opacity: 1; }
  }
  .mapkey-section {
    textarea { font-size: .85em; width: 100%; min-height: 115px;}
  }
}
